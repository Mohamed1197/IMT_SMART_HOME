/*******************************************************************************************************/
/* Author            : Ahmed khaled Hammad                                                             */
/* Version           : V0.0.0                                                                          */
/* Data              : 24 May 2022                                                                     */
/* Description       : HSERVO_Program.c --> implementations                                            */
/* Module  Features  :                                                                                 */
/*      01-HSERVO_voidInit                                                                             */
/*      02-HSERVO_voidSetAngle                                                                         */
/*******************************************************************************************************/

/*#####################################################################################################*/
/*#####################################################################################################*/

/*******************************************************************************************************/
/*                                      Standard Types LIB                                             */
/*******************************************************************************************************/

#include "../../LIB/LSTD_TYPES.h"
#include "../../LIB/LBIT_MATH.h"


/*#####################################################################################################*/
/*#####################################################################################################*/

/*******************************************************************************************************/
/*                                      MCAL Components                                                */
/*******************************************************************************************************/

#include"../../MCAL/MDIO/MDIO_Interface.h"
#include"../../MCAL/MTIMER/MTIMER_Interface.h"

/*#####################################################################################################*/
/*#####################################################################################################*/

/*#####################################################################################################*/
/*#####################################################################################################*/

/*******************************************************************************************************/
/*                                      HAL Module Library                                             */
/*******************************************************************************************************/

#include "HSERVO_Interface.h"

/*#####################################################################################################*/
/*#####################################################################################################*/

/*******************************************************************************************************/
/*                                      Functions Implementations                                      */
/*******************************************************************************************************/

/*#####################################################################################################*/
/*#####################################################################################################*/

/*******************************************************************************************************/
/*                                      01- HSERVO_voidInit                                            */
/*-----------------------------------------------------------------------------------------------------*/
/* 1- Function Description -> Initialize Timer 1 in FAST PWM OC1A                                        */
/* 2- Function Input       -> No Thing                                                                 */
/* 3- Function Return      -> No Thing                                                                 */
/*******************************************************************************************************/

void HSERVO_voidInit(void)
{
	MDIO_Error_State_SetPinDirection(PIN5,MDIO_PORTD,PIN_OUTPUT);
	MTIMER1_voidInit(TIMER1_FASTPWM_ICR_TOP_MODE,TIMER1_SCALER_8,OCRA_NON_INVERTING,OCRB_NON_INVERTING);
}

/*******************************************************************************************************/
/*                                      02- HSERVO_voidSetAngle                                        */
/*-----------------------------------------------------------------------------------------------------*/
/* 1- Function Description -> Set Servo Angle from 0 : 180                                             */
/* 2- Function Input       -> Servo Angle                                                              */
/* 3- Function Return      -> No Thing                                                                 */
/*******************************************************************************************************/

void HSERVO_voidSetAngle(u8 Copy_u8ServoAngle)
{
	if(Copy_u8ServoAngle<=180 && Copy_u8ServoAngle>= 0 )
	{
		MTIMER1_voidSetOcr1b(Copy_u8ServoAngle);
	}
	else
	{
		/*Do Nothing*/
	}

}

/*#####################################################################################################*/
/*                                  END OF FUNCTIONS IMPLEMENTATIONS                                   */
/*#####################################################################################################*/
